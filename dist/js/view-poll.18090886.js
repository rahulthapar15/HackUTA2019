(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-poll"],{1169:function(t,e,n){var r=n("2d95");t.exports=Array.isArray||function(t){return"Array"==r(t)}},"11e9":function(t,e,n){var r=n("52a7"),o=n("4630"),i=n("6821"),a=n("6a99"),c=n("69a8"),l=n("c69a"),s=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?s:function(t,e){if(t=i(t),e=a(e,!0),l)try{return s(t,e)}catch(n){}if(c(t,e))return o(!r.f.call(t,e),t[e])}},"26c2":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("navigation"),t.pollData.length>0?n("div",{staticClass:"container"},[n("div",{staticClass:"belowMargin share-link"},[t._v("Invite people to vote: "),n("label",{staticClass:"link",on:{click:function(e){return e.preventDefault(),t.copyLink()}}},[t._v(t._s(t.getSharableLink()))])]),n("input",{staticClass:"hdnInput",attrs:{type:"hidden",id:"shareLink"},domProps:{value:t.getSharableLink()}}),n("div",[t._v(t._s(t.hasAlreadyVoted()))]),n("div",{staticClass:"margin--left"},[n("label",{staticClass:"question belowMargin"},[t._v(t._s(t.pollData[0].data.question))]),t._l(t.pollData[0].data.options,function(e,r){return n("li",{key:r,staticClass:"optionlist"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOption,expression:"selectedOption"}],staticClass:"input-btn",attrs:{type:"radio"},domProps:{value:e.value,checked:t._q(t.selectedOption,e.value)},on:{change:function(n){t.selectedOption=e.value}}}),n("label",{staticClass:"input-lbl"},[t._v(t._s(e.value))])])}),n("button",{staticClass:"primaryBtn",on:{click:function(e){return e.preventDefault(),t.submitVote(e)}}},[t._v("Submit Vote")])],2)]):t._e()],1)},o=[],i=(n("8e6e"),n("456d"),n("85f2")),a=n.n(i);function c(t,e,n){return e in t?a()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n("ac4d"),n("8a81"),n("ac6a"),n("6b54"),n("28a5");var l=n("f4dd"),s=n("8aa5"),u=n.n(s);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(n,!0).forEach(function(e){c(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var d={name:"view-poll",data:function(){return{pollID:"",pollData:[],selectedOption:"",sharableLink:"",collectionName:"polls",votedFor:[],numberOfTimesVoted:0,loggedInUser:null,isLoggedIn:!1,hasVoted:!1}},methods:{getPollData:function(){var t=this;this.pollID=window.location.href.toString().split("poll-")[1],u.a.firestore().collection(this.collectionName).doc(this.pollID).onSnapshot(function(e){t.pollData.push(e.data()),t.callMultipleVoteCaseAPI()})},submitVote:function(){var t=!0,e=!1,n=void 0;try{for(var r,o=this.pollData[0].data.options[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value;i.value==this.selectedOption&&(i.count+=1,this.pollData[0].data.voteCount+=1)}}catch(a){e=!0,n=a}finally{try{t||null==o.return||o.return()}finally{if(e)throw n}}this.commitDataBack()},commitDataBack:function(){var t=this,e=this,n=this.collectionName,r=u.a.firestore(),o=r.collection(n);this.loggedInUser.uid?o.doc(this.pollID).set(this.pollData[0]).then(function(n){e.votedFor.push(t.pollID),e.updateUserVoteList()}):console.log("Error in adding data")},updateUserVoteList:function(){var t=this,e=(this.collectionName,u.a.firestore()),n=e.collection("userVotedFor");if(this.loggedInUser.uid){var r=p({},this.votedFor);n.doc(this.loggedInUser.uid).set({data:r}).then(function(e){window.alert("Vote has been recorded"),t.$router.push("/dashboard")})}else console.log("Error in adding data")},callMultipleVoteCaseAPI:function(){var t=this;u.a.firestore().collection("userVotedFor").doc(this.loggedInUser.uid).onSnapshot(function(e){if(e.data()&&"undefined"!=e.data()){var n=e.data().data;Object.keys(n).some(function(e){n[e]===t.pollID?t.hasVoted=!0:t.hasVoted=!1})}})},getSharableLink:function(){return window.location.href.toString()},copyLink:function(){var t=document.querySelector("#shareLink");t.setAttribute("type","text"),t.select();try{document.execCommand("copy");alert("Links has been copied ")}catch(e){alert("Oops, unable to copy")}testingCodeToCopy.setAttribute("type","hidden"),window.getSelection().removeAllRanges()},hasAlreadyVoted:function(){return this.hasVoted?"You have already voted for this poll.":""}},mounted:function(){var t=u.a.auth().currentUser;this.loggedInUser=t,t&&(this.isLoggedIn=!0),this.getPollData(),this.sharableLink=window.location.href.toString()},components:{Navigation:l["a"]}},h=d,b=n("2877"),v=Object(b["a"])(h,r,o,!1,null,null,null);e["default"]=v.exports},"37c8":function(t,e,n){e.f=n("2b4c")},"3a72":function(t,e,n){var r=n("7726"),o=n("8378"),i=n("2d00"),a=n("37c8"),c=n("86cc").f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||c(e,t,{value:a.f(t)})}},"454f":function(t,e,n){n("46a7");var r=n("584a").Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},"456d":function(t,e,n){var r=n("4bf8"),o=n("0d58");n("5eda")("keys",function(){return function(t){return o(r(t))}})},"46a7":function(t,e,n){var r=n("63b6");r(r.S+r.F*!n("8e60"),"Object",{defineProperty:n("d9f6").f})},"5eda":function(t,e,n){var r=n("5ca1"),o=n("8378"),i=n("79e5");t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*i(function(){n(1)}),"Object",a)}},"67ab":function(t,e,n){var r=n("ca5a")("meta"),o=n("d3f4"),i=n("69a8"),a=n("86cc").f,c=0,l=Object.isExtensible||function(){return!0},s=!n("79e5")(function(){return l(Object.preventExtensions({}))}),u=function(t){a(t,r,{value:{i:"O"+ ++c,w:{}}})},f=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!l(t))return"F";if(!e)return"E";u(t)}return t[r].i},p=function(t,e){if(!i(t,r)){if(!l(t))return!0;if(!e)return!1;u(t)}return t[r].w},d=function(t){return s&&h.NEED&&l(t)&&!i(t,r)&&u(t),t},h=t.exports={KEY:r,NEED:!1,fastKey:f,getWeak:p,onFreeze:d}},"7bbc":function(t,e,n){var r=n("6821"),o=n("9093").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return o(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==i.call(t)?c(t):o(r(t))}},"85f2":function(t,e,n){t.exports=n("454f")},"8a81":function(t,e,n){"use strict";var r=n("7726"),o=n("69a8"),i=n("9e1e"),a=n("5ca1"),c=n("2aba"),l=n("67ab").KEY,s=n("79e5"),u=n("5537"),f=n("7f20"),p=n("ca5a"),d=n("2b4c"),h=n("37c8"),b=n("3a72"),v=n("d4c0"),y=n("1169"),g=n("cb7c"),m=n("d3f4"),O=n("4bf8"),w=n("6821"),S=n("6a99"),j=n("4630"),P=n("2aeb"),D=n("7bbc"),k=n("11e9"),I=n("2621"),_=n("86cc"),C=n("0d58"),E=k.f,x=_.f,V=D.f,N=r.Symbol,F=r.JSON,L=F&&F.stringify,A="prototype",U=d("_hidden"),J=d("toPrimitive"),M={}.propertyIsEnumerable,T=u("symbol-registry"),q=u("symbols"),K=u("op-symbols"),B=Object[A],W="function"==typeof N&&!!I.f,Y=r.QObject,R=!Y||!Y[A]||!Y[A].findChild,$=i&&s(function(){return 7!=P(x({},"a",{get:function(){return x(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=E(B,e);r&&delete B[e],x(t,e,n),r&&t!==B&&x(B,e,r)}:x,z=function(t){var e=q[t]=P(N[A]);return e._k=t,e},G=W&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Q=function(t,e,n){return t===B&&Q(K,e,n),g(t),e=S(e,!0),g(n),o(q,e)?(n.enumerable?(o(t,U)&&t[U][e]&&(t[U][e]=!1),n=P(n,{enumerable:j(0,!1)})):(o(t,U)||x(t,U,j(1,{})),t[U][e]=!0),$(t,e,n)):x(t,e,n)},H=function(t,e){g(t);var n,r=v(e=w(e)),o=0,i=r.length;while(i>o)Q(t,n=r[o++],e[n]);return t},X=function(t,e){return void 0===e?P(t):H(P(t),e)},Z=function(t){var e=M.call(this,t=S(t,!0));return!(this===B&&o(q,t)&&!o(K,t))&&(!(e||!o(this,t)||!o(q,t)||o(this,U)&&this[U][t])||e)},tt=function(t,e){if(t=w(t),e=S(e,!0),t!==B||!o(q,e)||o(K,e)){var n=E(t,e);return!n||!o(q,e)||o(t,U)&&t[U][e]||(n.enumerable=!0),n}},et=function(t){var e,n=V(w(t)),r=[],i=0;while(n.length>i)o(q,e=n[i++])||e==U||e==l||r.push(e);return r},nt=function(t){var e,n=t===B,r=V(n?K:w(t)),i=[],a=0;while(r.length>a)!o(q,e=r[a++])||n&&!o(B,e)||i.push(q[e]);return i};W||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(n){this===B&&e.call(K,n),o(this,U)&&o(this[U],t)&&(this[U][t]=!1),$(this,t,j(1,n))};return i&&R&&$(B,t,{configurable:!0,set:e}),z(t)},c(N[A],"toString",function(){return this._k}),k.f=tt,_.f=Q,n("9093").f=D.f=et,n("52a7").f=Z,I.f=nt,i&&!n("2d00")&&c(B,"propertyIsEnumerable",Z,!0),h.f=function(t){return z(d(t))}),a(a.G+a.W+a.F*!W,{Symbol:N});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ot=0;rt.length>ot;)d(rt[ot++]);for(var it=C(d.store),at=0;it.length>at;)b(it[at++]);a(a.S+a.F*!W,"Symbol",{for:function(t){return o(T,t+="")?T[t]:T[t]=N(t)},keyFor:function(t){if(!G(t))throw TypeError(t+" is not a symbol!");for(var e in T)if(T[e]===t)return e},useSetter:function(){R=!0},useSimple:function(){R=!1}}),a(a.S+a.F*!W,"Object",{create:X,defineProperty:Q,defineProperties:H,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:nt});var ct=s(function(){I.f(1)});a(a.S+a.F*ct,"Object",{getOwnPropertySymbols:function(t){return I.f(O(t))}}),F&&a(a.S+a.F*(!W||s(function(){var t=N();return"[null]"!=L([t])||"{}"!=L({a:t})||"{}"!=L(Object(t))})),"JSON",{stringify:function(t){var e,n,r=[t],o=1;while(arguments.length>o)r.push(arguments[o++]);if(n=e=r[1],(m(e)||void 0!==t)&&!G(t))return y(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!G(e))return e}),r[1]=e,L.apply(F,r)}}),N[A][J]||n("32e9")(N[A],J,N[A].valueOf),f(N,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},"8e6e":function(t,e,n){var r=n("5ca1"),o=n("990b"),i=n("6821"),a=n("11e9"),c=n("f1ae");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){var e,n,r=i(t),l=a.f,s=o(r),u={},f=0;while(s.length>f)n=l(r,e=s[f++]),void 0!==n&&c(u,e,n);return u}})},9093:function(t,e,n){var r=n("ce10"),o=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},"990b":function(t,e,n){var r=n("9093"),o=n("2621"),i=n("cb7c"),a=n("7726").Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(i(t)),n=o.f;return n?e.concat(n(t)):e}},ac4d:function(t,e,n){n("3a72")("asyncIterator")},d4c0:function(t,e,n){var r=n("0d58"),o=n("2621"),i=n("52a7");t.exports=function(t){var e=r(t),n=o.f;if(n){var a,c=n(t),l=i.f,s=0;while(c.length>s)l.call(t,a=c[s++])&&e.push(a)}return e}},f1ae:function(t,e,n){"use strict";var r=n("86cc"),o=n("4630");t.exports=function(t,e,n){e in t?r.f(t,e,o(0,n)):t[e]=n}}}]);
//# sourceMappingURL=view-poll.18090886.js.map